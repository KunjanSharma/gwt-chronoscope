<module>

  <!-- Inherit the core Web Toolkit stuff.                  -->
  <inherits name='com.google.gwt.user.User'/>
  <inherits name='com.google.gwt.http.HTTP'/>
  <inherits name='com.google.gwt.i18n.I18N'/>
  <inherits name="com.google.gwt.inject.Inject"/>
  <inherits name="org.timepedia.chronoscope.ChronoscopeAPI"/>
  <!-- inherits name="com.google.gwt.user.theme.chrome.Chrome"/ -->
   
 <inherits name='org.timepedia.exporter.Exporter'/>


  <define-property name="hasflash" values="yes,no,force"/>
  <property-provider name="hasflash"><![CDATA[
    if(window.location.href.indexOf("_force_flash") != -1) return "force";      
    if(navigator.plugins) {
      var x = navigator.plugins['Shockwave Flash'];
      if(x) {
        var desc = x.description;
        var ind = desc.indexOf('.');
        if(ind > -1 && desc.charAt(ind-1) == '9') return "yes";
      }
    }
    if(navigator.userAgent.indexOf("MSIE") != -1) {
      var axo = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.9");
      if(axo != null && axo != undefined) return "yes";
    }
    return "no";
    ]]>
  </property-provider>

  <replace-with class="org.timepedia.chronoscope.client.browser.GssStyleElementGssContext">
    <when-type-is class="org.timepedia.chronoscope.client.browser.BrowserGssContext"/>
  </replace-with>
  
  <replace-with class="org.timepedia.chronoscope.client.browser.BrowserView">
    <when-type-is class="org.timepedia.chronoscope.client.browser.DOMView"/>
  </replace-with>

  <replace-with
      class="org.timepedia.chronoscope.client.browser.flashcanvas.FlashView">
    <when-type-is class="org.timepedia.chronoscope.client.browser.DOMView"/>
    <when-property-is name="user.agent" value="ie6"/>
    <when-property-is name="hasflash" value="yes"/>
  </replace-with>

  <replace-with class="org.timepedia.chronoscope.client.browser.flashcanvas.FlashView">
    <when-type-is class="org.timepedia.chronoscope.client.browser.DOMView"/>
    <when-property-is name="user.agent" value="ie8"/>
    <when-property-is name="hasflash" value="yes"/>
  </replace-with>       <!-- TODO - test in ie8 -->

  <replace-with class="org.timepedia.chronoscope.client.browser.flashcanvas.FlashView">
    <when-type-is class="org.timepedia.chronoscope.client.browser.DOMView"/>
    <when-property-is name="hasflash" value="force"/>
  </replace-with>
 
  <set-property name="export" value="no"/>
  <!--<set-property name="hasflash" value="yes"/>-->
  
   <replace-with class="org.timepedia.chronoscope.client.browser.ChartEventHandler">
    <when-type-is class="org.timepedia.chronoscope.client.browser.ChartEventHandler"/>
  </replace-with>
  
  
  <replace-with class="org.timepedia.chronoscope.client.browser.ChartEventHandlerFirefox">
    <when-type-is class="org.timepedia.chronoscope.client.browser.ChartEventHandler"/>
    <when-property-is name="user.agent" value="gecko1_8"/>
  </replace-with>



  <stylesheet src="theme/chrome/chrome.css" />
</module>
